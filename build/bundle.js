var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function c(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function f(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){(null!=e||t.value)&&(t.value=e)}function y(t,e,n){t.classList[n?"add":"remove"](e)}let g;function x(t){g=t}function b(){if(!g)throw new Error("Function called outside component initialization");return g}function w(){const t=b();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,s)})}}}const E=[],M=[],A=[],k=[],O=Promise.resolve();let T=!1;function _(t){A.push(t)}let $=!1;const C=new Set;function I(){if(!$){$=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];x(e),N(e.$$)}for(E.length=0;M.length;)M.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];C.has(e)||(C.add(e),e())}A.length=0}while(E.length);for(;k.length;)k.pop()();T=!1,$=!1,C.clear()}}function N(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const S=new Set;let P;function F(){P={r:0,c:[],p:P}}function R(){P.r||r(P.c),P=P.p}function j(t,e){t&&t.i&&(S.delete(t),t.i(e))}function L(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),P.c.push(()=>{S.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function U(t,e){const n=e.token={};function r(t,r,s,o){if(e.token!==n)return;e.resolved=o;let i=e.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const a=t&&(e.current=t)(i);let u=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==r&&t&&(F(),L(t,1,1,()=>{e.blocks[n]=null}),R())}):e.block.d(1),a.c(),j(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[r]=a),u&&I()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=b();if(t.then(t=>{x(n),r(e.then,1,e.value,t),x(null)},t=>{x(n),r(e.catch,2,e.error,t),x(null)}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var s}function B(t,e){L(t,1,1,()=>{e.delete(t.key)})}function q(t){t&&t.c()}function V(t,n,o){const{fragment:i,on_mount:a,on_destroy:u,after_update:l}=t.$$;i&&i.m(n,o),_(()=>{const n=a.map(e).filter(s);u?u.push(...n):r(n),t.$$.on_mount=[]}),l.forEach(_)}function z(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(E.push(t),T||(T=!0,O.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,s,o,i,a,u,l=[-1]){const c=g;x(e);const p=s.props||{},h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:l};let f=!1;h.ctx=o?o(e,p,(t,n,...r)=>{const s=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=s)&&(h.bound[t]&&h.bound[t](s),f&&D(e,t)),n}):[],h.update(),f=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),s.target&&(s.hydrate?h.fragment&&h.fragment.l(function(t){return Array.from(t.childNodes)}(s.target)):h.fragment&&h.fragment.c(),s.intro&&j(e.$$.fragment),V(e,s.target,s.anchor),I()),x(c)}class Y{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var H={exports:{}};if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");var J=self.crypto||self.msCrypto;H.exports=function(t){t=t||21;for(var e="",n=J.getRandomValues(new Uint8Array(t));0<t--;)e+="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-"[63&n[t]];return e};var K=H.exports,G="object"==typeof global&&global&&global.Object===Object&&global,X="object"==typeof self&&self&&self.Object===Object&&self,Q=G||X||Function("return this")(),Z=Q.Symbol,tt=Object.prototype,et=tt.hasOwnProperty,nt=tt.toString,rt=Z?Z.toStringTag:void 0;var st=Object.prototype.toString;var ot=Z?Z.toStringTag:void 0;function it(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ot&&ot in Object(t)?function(t){var e=et.call(t,rt),n=t[rt];try{t[rt]=void 0;var r=!0}catch(t){}var s=nt.call(t);return r&&(e?t[rt]=n:delete t[rt]),s}(t):function(t){return st.call(t)}(t)}function at(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==it(t)}var ut=Array.isArray,lt=Z?Z.prototype:void 0,ct=lt?lt.toString:void 0;function pt(t){if("string"==typeof t)return t;if(ut(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}(t,pt)+"";if(at(t))return ct?ct.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ht(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var ft,dt=Q["__core-js_shared__"],vt=(ft=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||""))?"Symbol(src)_1."+ft:"";var mt=Function.prototype.toString;var yt=/^\[object .+?Constructor\]$/,gt=Function.prototype,xt=Object.prototype,bt=gt.toString,wt=xt.hasOwnProperty,Et=RegExp("^"+bt.call(wt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mt(t){return!(!ht(t)||(e=t,vt&&vt in e))&&(function(t){if(!ht(t))return!1;var e=it(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)?Et:yt).test(function(t){if(null!=t){try{return mt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function At(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(n)?n:void 0}var kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/;var Tt=At(Object,"create");var _t=Object.prototype.hasOwnProperty;var $t=Object.prototype.hasOwnProperty;function Ct(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function It(t,e){for(var n,r,s=t.length;s--;)if((n=t[s][0])===(r=e)||n!=n&&r!=r)return s;return-1}Ct.prototype.clear=function(){this.__data__=Tt?Tt(null):{},this.size=0},Ct.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ct.prototype.get=function(t){var e=this.__data__;if(Tt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return _t.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return Tt?void 0!==e[t]:$t.call(e,t)},Ct.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tt&&void 0===e?"__lodash_hash_undefined__":e,this};var Nt=Array.prototype.splice;function St(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}St.prototype.clear=function(){this.__data__=[],this.size=0},St.prototype.delete=function(t){var e=this.__data__,n=It(e,t);return!(n<0)&&(n==e.length-1?e.pop():Nt.call(e,n,1),--this.size,!0)},St.prototype.get=function(t){var e=this.__data__,n=It(e,t);return n<0?void 0:e[n][1]},St.prototype.has=function(t){return It(this.__data__,t)>-1},St.prototype.set=function(t,e){var n=this.__data__,r=It(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Pt=At(Q,"Map");function Ft(t,e){var n,r,s=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof e?"string":"hash"]:s.map}function Rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Rt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ct,map:new(Pt||St),string:new Ct}},Rt.prototype.delete=function(t){var e=Ft(this,t).delete(t);return this.size-=e?1:0,e},Rt.prototype.get=function(t){return Ft(this,t).get(t)},Rt.prototype.has=function(t){return Ft(this,t).has(t)},Rt.prototype.set=function(t,e){var n=Ft(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function jt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var i=t.apply(this,r);return n.cache=o.set(s,i)||o,i};return n.cache=new(jt.Cache||Rt),n}jt.Cache=Rt;var Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ut=/\\(\\)?/g,Bt=function(t){var e=jt(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Lt,(function(t,n,r,s){e.push(r?s.replace(Ut,"$1"):n||t)})),e}));function qt(t,e){return ut(t)?t:function(t,e){if(ut(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!at(t))||(Ot.test(t)||!kt.test(t)||null!=e&&t in Object(e))}(t,e)?[t]:Bt(function(t){return null==t?"":pt(t)}(t))}function Vt(t){if("string"==typeof t||at(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zt(t,e,n){var r=null==t?void 0:function(t,e){for(var n=0,r=(e=qt(e,t)).length;null!=t&&n<r;)t=t[Vt(e[n++])];return n&&n==r?t:void 0}(t,e);return void 0===r?n:r}function Dt(){let t=localStorage.getItem("widgets");return t=JSON.parse(t)||[],t}function Wt(t){localStorage.setItem("widgets",JSON.stringify(t))}function Yt(t){let e,n,r,s,o,l,p;return{c(){e=c("div"),n=c("label"),n.innerHTML="\n              JSON Path\n              <small>(Optional)</small>",r=h(),s=c("div"),o=c("input"),d(n,"class","label"),d(o,"class","input"),d(o,"type","text"),d(o,"placeholder",l="e.g. collections[0].products[2].price OR [0].jobUrl,[0].jobLocation"),d(s,"class","control"),d(e,"class","control")},m(u,l){a(u,e,l),i(e,n),i(e,r),i(e,s),i(s,o),m(o,t[1].jsonPath),p=f(o,"input",t[16])},p(t,e){2&e&&o.value!==t[1].jsonPath&&m(o,t[1].jsonPath)},d(t){t&&u(e),p()}}}function Ht(e){let n,s,o,l,v,g,x,b,w,E,M,A,k,O,T,_,$,C,I,N,S,P,F,R,j,L,U,B,q,V,z,D,W,Y,H,J,K,G,X,Q,Z,tt,et,nt,rt,st,ot,it,at,ut,lt,ct,pt,ht,ft,dt,vt="json"===e[1].responseFormat&&Yt(e);return{c(){n=c("div"),s=c("button"),s.textContent="Add Fetcher Widget",o=h(),l=c("div"),v=c("div"),g=h(),x=c("div"),b=c("header"),w=c("p"),w.textContent="Widget info",E=h(),M=c("button"),A=h(),k=c("section"),O=c("div"),T=c("label"),T.textContent="Title",_=h(),$=c("div"),C=c("input"),I=h(),N=c("label"),N.textContent="Request URL",S=h(),P=c("div"),F=c("input"),R=h(),j=c("label"),j.innerHTML="\n          Request Config\n          <small>(Optional)</small>",L=h(),U=c("div"),B=c("input"),V=h(),z=c("div"),D=c("label"),D.textContent="Response Format",W=h(),Y=c("div"),H=c("label"),J=c("input"),G=p("\n            Text"),X=h(),Q=c("label"),Z=c("input"),et=p("\n            JSON"),nt=h(),vt&&vt.c(),rt=h(),st=c("label"),ot=c("input"),it=p("\n          Use CORS Proxy (Enable if your request does not work)"),at=h(),ut=c("label"),lt=c("input"),ct=p("\n          Prevent Cache (Enable if result don't update)"),pt=h(),ht=c("footer"),ft=c("button"),ft.textContent="Save changes",d(s,"class","button is-primary is-small"),d(n,"class","control"),d(v,"class","modal-background"),d(w,"class","modal-card-title"),d(M,"class","delete"),d(M,"aria-label","close"),d(b,"class","modal-card-head"),d(T,"class","label"),d(C,"class","input"),d(C,"type","text"),d(C,"placeholder","e.g. Shoot the atomic bomb"),d($,"class","control"),d(N,"class","label"),d(F,"class","input"),d(F,"type","text"),d(F,"placeholder","e.g. https://api.example.com/bombs"),d(P,"class","control"),d(j,"class","label"),d(B,"class","input"),d(B,"type","text"),d(B,"placeholder",q='e.g. {"method": "POST", "data": {password: "p@ssw0rd"}}'),d(U,"class","control"),d(O,"class","field"),d(D,"class","label"),J.__value=K="text",J.value=J.__value,d(J,"type","radio"),d(J,"name","responseFormat"),e[14][0].push(J),d(H,"class","radio mr-sm"),Z.__value=tt="json",Z.value=Z.__value,d(Z,"type","radio"),d(Z,"name","responseFormat"),e[14][0].push(Z),d(Q,"class","radio"),d(Y,"class","control"),d(ot,"type","checkbox"),d(st,"class","checkbox"),d(lt,"type","checkbox"),d(ut,"class","checkbox"),d(z,"class","field"),d(k,"class","modal-card-body"),d(ft,"class","button is-success"),d(ht,"class","modal-card-foot"),d(x,"class","modal-card"),d(l,"id","modal"),d(l,"class","modal"),y(l,"is-active",e[0])},m(t,r){a(t,n,r),i(n,s),a(t,o,r),a(t,l,r),i(l,v),i(l,g),i(l,x),i(x,b),i(b,w),i(b,E),i(b,M),i(x,A),i(x,k),i(k,O),i(O,T),i(O,_),i(O,$),i($,C),m(C,e[1].title),i(O,I),i(O,N),i(O,S),i(O,P),i(P,F),m(F,e[1].url),i(O,R),i(O,j),i(O,L),i(O,U),i(U,B),m(B,e[1].config),i(k,V),i(k,z),i(z,D),i(z,W),i(z,Y),i(Y,H),i(H,J),J.checked=J.__value===e[1].responseFormat,i(H,G),i(Y,X),i(Y,Q),i(Q,Z),Z.checked=Z.__value===e[1].responseFormat,i(Q,et),i(z,nt),vt&&vt.m(z,null),i(z,rt),i(z,st),i(st,ot),ot.checked=e[1].useProxy,i(st,it),i(z,at),i(z,ut),i(ut,lt),lt.checked=e[1].noCache,i(ut,ct),i(x,pt),i(x,ht),i(ht,ft),dt=[f(s,"click",e[7]),f(v,"click",e[8]),f(M,"click",e[9]),f(C,"input",e[10]),f(F,"input",e[11]),f(B,"input",e[12]),f(J,"change",e[13]),f(Z,"change",e[15]),f(ot,"change",e[17]),f(lt,"change",e[18]),f(ft,"click",e[3])]},p(t,[e]){2&e&&C.value!==t[1].title&&m(C,t[1].title),2&e&&F.value!==t[1].url&&m(F,t[1].url),2&e&&B.value!==t[1].config&&m(B,t[1].config),2&e&&(J.checked=J.__value===t[1].responseFormat),2&e&&(Z.checked=Z.__value===t[1].responseFormat),"json"===t[1].responseFormat?vt?vt.p(t,e):(vt=Yt(t),vt.c(),vt.m(z,rt)):vt&&(vt.d(1),vt=null),2&e&&(ot.checked=t[1].useProxy),2&e&&(lt.checked=t[1].noCache),1&e&&y(l,"is-active",t[0])},i:t,o:t,d(t){t&&u(n),t&&u(o),t&&u(l),e[14][0].splice(e[14][0].indexOf(J),1),e[14][0].splice(e[14][0].indexOf(Z),1),vt&&vt.d(),r(dt)}}}function Jt(t,e,n){const r=w();let s=!1;const o={responseFormat:"text",jsonPath:"",title:"",url:"",config:"",useProxy:!1,noCache:!1};let i={...o};function a(t){n(0,s=t)}function u(){n(1,i={...o})}return[s,i,a,function(){const t=Dt();Wt([{type:"fetcher",id:K(8),content:i},...t]),u(),a(!1),r("add")},r,o,u,()=>a(!0),()=>a(!1),()=>a(!1),function(){i.title=this.value,n(1,i)},function(){i.url=this.value,n(1,i)},function(){i.config=this.value,n(1,i)},function(){i.responseFormat=this.__value,n(1,i)},[[]],function(){i.responseFormat=this.__value,n(1,i)},function(){i.jsonPath=this.value,n(1,i)},function(){i.useProxy=this.checked,n(1,i)},function(){i.noCache=this.checked,n(1,i)}]}class Kt extends Y{constructor(t){super(),W(this,t,Jt,Ht,o,{})}}function Gt(t,e,n){const r=t.slice();return r[19]=e[n],r[20]=e,r[21]=n,r}function Xt(t,e,n){const r=t.slice();return r[19]=e[n],r[22]=e,r[23]=n,r}function Qt(t){let e;return{c(){e=c("h3"),e.innerHTML="<i><small>Source Variables</small></i>",d(e,"class","mb-md has-text-info")},m(t,n){a(t,e,n)},d(t){t&&u(e)}}}function Zt(t){let e,n,r,s,o,l,y,g,x,b,w,E,M=t[19].name+"";function A(){t[16].call(w,t[19])}return{c(){e=c("div"),n=c("div"),r=c("label"),s=p("Variable Title\n              "),o=c("sup"),l=p("(use in equation as "),y=p(M),g=p(")"),x=h(),b=c("div"),w=c("input"),d(r,"class","label"),d(w,"class","input"),d(w,"type","text"),d(w,"placeholder","e.g. My Weight"),d(b,"class","control"),d(n,"class","field"),d(e,"class","box")},m(u,c){a(u,e,c),i(e,n),i(n,r),i(r,s),i(r,o),i(o,l),i(o,y),i(o,g),i(n,x),i(n,b),i(b,w),m(w,t[19].title),E=f(w,"input",A)},p(e,n){t=e,1&n&&M!==(M=t[19].name+"")&&v(y,M),1&n&&w.value!==t[19].title&&m(w,t[19].title)},d(t){t&&u(e),E()}}}function te(t){let e;return{c(){e=c("hr")},m(t,n){a(t,e,n)},d(t){t&&u(e)}}}function ee(t){let e;return{c(){e=c("h3"),e.innerHTML="<i><small>Formulas</small></i>",d(e,"class","mb-md has-text-info")},m(t,n){a(t,e,n)},d(t){t&&u(e)}}}function ne(t){let e,n,s,o,l,p,v,y,g,x,b,w,E,M,A;function k(){t[17].call(p,t[19])}function O(){t[18].call(b,t[19])}return{c(){e=c("div"),n=c("div"),s=c("label"),s.textContent="Equation Title",o=h(),l=c("div"),p=c("input"),v=h(),y=c("label"),y.textContent="Math Formula",g=h(),x=c("div"),b=c("input"),w=h(),E=c("p"),E.innerHTML='<a href="https://github.com/silentmatt/expr-eval/tree/master" target="_blank">\n                How to write math functions?\n              </a>',M=h(),d(s,"class","label"),d(p,"class","input"),d(p,"type","text"),d(p,"placeholder","e.g. My BMI"),d(l,"class","control"),d(y,"class","label"),d(b,"class","input"),d(b,"type","text"),d(b,"placeholder","e.g. x1 / x2 ^ 2"),d(x,"class","control"),d(E,"class","help"),d(n,"class","field"),d(e,"class","box")},m(r,u){a(r,e,u),i(e,n),i(n,s),i(n,o),i(n,l),i(l,p),m(p,t[19].title),i(n,v),i(n,y),i(n,g),i(n,x),i(x,b),m(b,t[19].formula),i(n,w),i(n,E),i(e,M),A=[f(p,"input",k),f(b,"input",O)]},p(e,n){t=e,2&n&&p.value!==t[19].title&&m(p,t[19].title),2&n&&b.value!==t[19].formula&&m(b,t[19].formula)},d(t){t&&u(e),r(A)}}}function re(e){let n,s,o,p,v,g,x,b,w,E,M,A,k,O,T,_,$,C,I,N,S,P,F,R,j,L,U,B,q,V,z,D,W=e[0].length>0&&Qt(),Y=e[0],H=[];for(let t=0;t<Y.length;t+=1)H[t]=Zt(Xt(e,Y,t));let J=e[1].length>0&&e[0].length>0&&te(),K=e[1].length>0&&ee(),G=e[1],X=[];for(let t=0;t<G.length;t+=1)X[t]=ne(Gt(e,G,t));return{c(){n=c("div"),s=c("button"),s.textContent="Add Equation Widget",o=h(),p=c("div"),v=c("div"),g=h(),x=c("div"),b=c("header"),w=c("p"),w.textContent="Widget info",E=h(),M=c("button"),A=h(),k=c("section"),O=c("div"),T=c("label"),T.textContent="Widget Title",_=h(),$=c("div"),C=c("input"),I=h(),N=c("div"),S=c("button"),S.textContent="Add Source Variable",P=h(),F=c("button"),F.textContent="Add Formula",R=h(),W&&W.c(),j=h();for(let t=0;t<H.length;t+=1)H[t].c();L=h(),J&&J.c(),U=h(),K&&K.c(),B=h();for(let t=0;t<X.length;t+=1)X[t].c();q=h(),V=c("footer"),z=c("button"),z.textContent="Save changes",d(s,"class","button is-primary is-small"),d(n,"class","control"),d(v,"class","modal-background"),d(w,"class","modal-card-title"),d(M,"class","delete"),d(M,"aria-label","close"),d(b,"class","modal-card-head"),d(T,"class","label"),d(C,"class","input"),d(C,"type","text"),d(C,"placeholder","e.g. BMI"),d($,"class","control"),d(O,"class","field"),d(S,"class","button is-primary is-small mr-xs"),d(F,"class","button is-primary is-small"),d(N,"class","d-flex mb-md"),d(k,"class","modal-card-body"),d(z,"class","button is-success"),d(V,"class","modal-card-foot"),d(x,"class","modal-card"),d(p,"id","modal"),d(p,"class","modal"),y(p,"is-active",e[2])},m(t,r){a(t,n,r),i(n,s),a(t,o,r),a(t,p,r),i(p,v),i(p,g),i(p,x),i(x,b),i(b,w),i(b,E),i(b,M),i(x,A),i(x,k),i(k,O),i(O,T),i(O,_),i(O,$),i($,C),m(C,e[3].title),i(k,I),i(k,N),i(N,S),i(N,P),i(N,F),i(k,R),W&&W.m(k,null),i(k,j);for(let t=0;t<H.length;t+=1)H[t].m(k,null);i(k,L),J&&J.m(k,null),i(k,U),K&&K.m(k,null),i(k,B);for(let t=0;t<X.length;t+=1)X[t].m(k,null);i(x,q),i(x,V),i(V,z),D=[f(s,"click",e[12]),f(v,"click",e[13]),f(M,"click",e[14]),f(C,"input",e[15]),f(S,"click",e[6]),f(F,"click",e[7]),f(z,"click",e[5])]},p(t,[e]){if(8&e&&C.value!==t[3].title&&m(C,t[3].title),t[0].length>0?W||(W=Qt(),W.c(),W.m(k,j)):W&&(W.d(1),W=null),1&e){let n;for(Y=t[0],n=0;n<Y.length;n+=1){const r=Xt(t,Y,n);H[n]?H[n].p(r,e):(H[n]=Zt(r),H[n].c(),H[n].m(k,L))}for(;n<H.length;n+=1)H[n].d(1);H.length=Y.length}if(t[1].length>0&&t[0].length>0?J||(J=te(),J.c(),J.m(k,U)):J&&(J.d(1),J=null),t[1].length>0?K||(K=ee(),K.c(),K.m(k,B)):K&&(K.d(1),K=null),2&e){let n;for(G=t[1],n=0;n<G.length;n+=1){const r=Gt(t,G,n);X[n]?X[n].p(r,e):(X[n]=ne(r),X[n].c(),X[n].m(k,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=G.length}4&e&&y(p,"is-active",t[2])},i:t,o:t,d(t){t&&u(n),t&&u(o),t&&u(p),W&&W.d(),l(H,t),J&&J.d(),K&&K.d(),l(X,t),r(D)}}}function se(t,e,n){const r=w();let s=[],o=[],i=!1;const a={title:"",sources:[],equations:[]};let u={...a};function l(t){n(2,i=t)}function c(){n(3,u={...a})}function p(){return{...u,sources:[...s],equations:[...o]}}return[s,o,i,u,l,function(){const t=Dt();Wt([{type:"equation",id:K(8),content:p()},...t]),c(),l(!1),r("add")},function(){n(0,s=[...s,{id:K(8),title:"",name:`x${s.length+1}`}])},function(){n(1,o=[...o,{id:K(8),title:"",formula:""}])},r,a,c,p,()=>l(!0),()=>l(!1),()=>l(!1),function(){u.title=this.value,n(3,u)},function(t){t.title=this.value,n(0,s)},function(t){t.title=this.value,n(1,o)},function(t){t.formula=this.value,n(1,o)}]}class oe extends Y{constructor(t){super(),W(this,t,se,re,o,{})}}function ie(t,e,n){const r=t.slice();return r[4]=e[n],r}function ae(e){return{c:t,m:t,p:t,d:t}}function ue(t){let e,n,r;function s(t,e){return(null==n||2&e)&&(n=!(!ut(t[3])||1!==t[3].length)),n?pe:((null==r||2&e)&&(r=!!ut(t[3])),r?ce:le)}let o=s(t,-1),i=o(t);return{c(){e=c("div"),i.c()},m(t,n){a(t,e,n),i.m(e,null)},p(t,n){o===(o=s(t,n))&&i?i.p(t,n):(i.d(1),i=o(t),i&&(i.c(),i.m(e,null)))},d(t){t&&u(e),i.d()}}}function le(t){let e,n,r=t[3]+"";return{c(){e=c("span"),n=p(r)},m(t,r){a(t,e,r),i(e,n)},p(t,e){2&e&&r!==(r=t[3]+"")&&v(n,r)},d(t){t&&u(e)}}}function ce(t){let e,n,r=t[3],s=[];for(let e=0;e<r.length;e+=1)s[e]=he(ie(t,r,e));return{c(){e=c("table"),n=c("tr");for(let t=0;t<s.length;t+=1)s[t].c();d(e,"class","table is-bordered")},m(t,r){a(t,e,r),i(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,e){if(2&e){let o;for(r=t[3],o=0;o<r.length;o+=1){const i=ie(t,r,o);s[o]?s[o].p(i,e):(s[o]=he(i),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(t){t&&u(e),l(s,t)}}}function pe(t){let e,n,r=t[3]+"";return{c(){e=c("span"),n=p(r)},m(t,r){a(t,e,r),i(e,n)},p(t,e){2&e&&r!==(r=t[3]+"")&&v(n,r)},d(t){t&&u(e)}}}function he(t){let e,n,r=t[4]+"";return{c(){e=c("td"),n=p(r)},m(t,r){a(t,e,r),i(e,n)},p(t,e){2&e&&r!==(r=t[4]+"")&&v(n,r)},d(t){t&&u(e)}}}function fe(e){let n;return{c(){n=p("loading...")},m(t,e){a(t,n,e)},p:t,d(t){t&&u(n)}}}function de(e){let n,r,s,o,l,m,y,g,x,b=(e[0].title||"Untitled")+"",w={ctx:e,current:null,token:null,pending:fe,then:ue,catch:ae,value:3};return U(g=e[1],w),{c(){n=c("div"),r=c("div"),s=c("span"),o=p(b),l=h(),m=c("div"),m.innerHTML='<ion-icon class="has-text-info is-block" size="small" src="icons/reload-circle-sharp.svg"></ion-icon>',y=h(),w.block.c(),d(s,"class","mr-sm"),d(m,"class","action svelte-8rbeva"),d(r,"class","widget--title mb-xs is-flex align-center svelte-8rbeva"),d(n,"class","widget--content")},m(t,u){a(t,n,u),i(n,r),i(r,s),i(s,o),i(r,l),i(r,m),i(n,y),w.block.m(n,w.anchor=null),w.mount=()=>n,w.anchor=null,x=f(m,"click",e[2])},p(t,[n]){if(e=t,1&n&&b!==(b=(e[0].title||"Untitled")+"")&&v(o,b),w.ctx=e,2&n&&g!==(g=e[1])&&U(g,w));else{const t=e.slice();t[3]=w.resolved,w.block.p(t,n)}},i:t,o:t,d(t){t&&u(n),w.block.d(),w.token=null,w=null,x()}}}async function ve({url:t,config:e,responseFormat:n,noCache:r=!1,useProxy:s=!1,jsonPath:o=""}){const i={method:"GET"};let a;try{a=JSON.parse(e)}catch(t){a=i}let u=`${s?"https://cors-anywhere.herokuapp.com/":""}${t}`;r&&(u=function(t){const e=new URL(t);return e.searchParams.set("nocache",Math.random()),e.href}(u));const l=await fetch(u,a);let c=await l[n]();return c="json"===n?function(t,e){return e.split(",").map(e=>zt(t,e))}(c,o):c,l.ok?c:"failed to load"}function me(t,e,n){let r,{content:s}=e;function o(){n(1,r=ve(s))}return o(),t.$set=t=>{"content"in t&&n(0,s=t.content)},[s,r,o]}class ye extends Y{constructor(t){super(),W(this,t,me,de,o,{content:0})}}var ge="INUMBER",xe="IVAR",be="IEXPR";function we(t,e){this.type=t,this.value=null!=e?e:0}function Ee(t){return new we("IOP1",t)}function Me(t){return new we("IOP2",t)}function Ae(t){return new we("IOP3",t)}function ke(t,e,n){var r,s,o,i,a,u,l=[];if(Te(t))return _e(t,n);for(var c=t.length,p=0;p<c;p++){var h=t[p],f=h.type;if(f===ge||"IVARNAME"===f)l.push(h.value);else if("IOP2"===f)s=l.pop(),r=l.pop(),"and"===h.value?l.push(!!r&&!!ke(s,e,n)):"or"===h.value?l.push(!!r||!!ke(s,e,n)):"="===h.value?(i=e.binaryOps[h.value],l.push(i(r,ke(s,e,n),n))):(i=e.binaryOps[h.value],l.push(i(_e(r,n),_e(s,n))));else if("IOP3"===f)o=l.pop(),s=l.pop(),r=l.pop(),"?"===h.value?l.push(ke(r?s:o,e,n)):(i=e.ternaryOps[h.value],l.push(i(_e(r,n),_e(s,n),_e(o,n))));else if(f===xe)if(h.value in e.functions)l.push(e.functions[h.value]);else if(h.value in e.unaryOps&&e.parser.isOperatorEnabled(h.value))l.push(e.unaryOps[h.value]);else{var d=n[h.value];if(void 0===d)throw new Error("undefined variable: "+h.value);l.push(d)}else if("IOP1"===f)r=l.pop(),i=e.unaryOps[h.value],l.push(i(_e(r,n)));else if("IFUNCALL"===f){for(u=h.value,a=[];u-- >0;)a.unshift(_e(l.pop(),n));if(!(i=l.pop()).apply||!i.call)throw new Error(i+" is not a function");l.push(i.apply(void 0,a))}else if("IFUNDEF"===f)l.push(function(){for(var t=l.pop(),r=[],s=h.value;s-- >0;)r.unshift(l.pop());var o=l.pop(),i=function(){for(var s=Object.assign({},n),o=0,i=r.length;o<i;o++)s[r[o]]=arguments[o];return ke(t,e,s)};return Object.defineProperty(i,"name",{value:o,writable:!1}),n[o]=i,i}());else if(f===be)l.push(Oe(h,e));else if("IEXPREVAL"===f)l.push(h);else if("IMEMBER"===f)r=l.pop(),l.push(r[h.value]);else if("IENDSTATEMENT"===f)l.pop();else{if("IARRAY"!==f)throw new Error("invalid Expression");for(u=h.value,a=[];u-- >0;)a.unshift(l.pop());l.push(a)}}if(l.length>1)throw new Error("invalid Expression (parity)");return 0===l[0]?0:_e(l[0],n)}function Oe(t,e,n){return Te(t)?t:{type:"IEXPREVAL",value:function(n){return ke(t.value,e,n)}}}function Te(t){return t&&"IEXPREVAL"===t.type}function _e(t,e){return Te(t)?t.value(e):t}function $e(t,e){for(var n,r,s,o,i,a,u=[],l=0;l<t.length;l++){var c=t[l],p=c.type;if(p===ge)"number"==typeof c.value&&c.value<0?u.push("("+c.value+")"):Array.isArray(c.value)?u.push("["+c.value.map(Ce).join(", ")+"]"):u.push(Ce(c.value));else if("IOP2"===p)r=u.pop(),n=u.pop(),o=c.value,e?"^"===o?u.push("Math.pow("+n+", "+r+")"):"and"===o?u.push("(!!"+n+" && !!"+r+")"):"or"===o?u.push("(!!"+n+" || !!"+r+")"):"||"===o?u.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):"=="===o?u.push("("+n+" === "+r+")"):"!="===o?u.push("("+n+" !== "+r+")"):"["===o?u.push(n+"[("+r+") | 0]"):u.push("("+n+" "+o+" "+r+")"):"["===o?u.push(n+"["+r+"]"):u.push("("+n+" "+o+" "+r+")");else if("IOP3"===p){if(s=u.pop(),r=u.pop(),n=u.pop(),"?"!==(o=c.value))throw new Error("invalid Expression");u.push("("+n+" ? "+r+" : "+s+")")}else if(p===xe||"IVARNAME"===p)u.push(c.value);else if("IOP1"===p)n=u.pop(),"-"===(o=c.value)||"+"===o?u.push("("+o+n+")"):e?"not"===o?u.push("(!"+n+")"):"!"===o?u.push("fac("+n+")"):u.push(o+"("+n+")"):"!"===o?u.push("("+n+"!)"):u.push("("+o+" "+n+")");else if("IFUNCALL"===p){for(a=c.value,i=[];a-- >0;)i.unshift(u.pop());o=u.pop(),u.push(o+"("+i.join(", ")+")")}else if("IFUNDEF"===p){for(r=u.pop(),a=c.value,i=[];a-- >0;)i.unshift(u.pop());n=u.pop(),e?u.push("("+n+" = function("+i.join(", ")+") { return "+r+" })"):u.push("("+n+"("+i.join(", ")+") = "+r+")")}else if("IMEMBER"===p)n=u.pop(),u.push(n+"."+c.value);else if("IARRAY"===p){for(a=c.value,i=[];a-- >0;)i.unshift(u.pop());u.push("["+i.join(", ")+"]")}else if(p===be)u.push("("+$e(c.value,e)+")");else if("IENDSTATEMENT"!==p)throw new Error("invalid Expression")}return u.length>1&&(u=e?[u.join(",")]:[u.join(";")]),String(u[0])}function Ce(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function Ie(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function Ne(t,e,n){for(var r=!!(n=n||{}).withMembers,s=null,o=0;o<t.length;o++){var i=t[o];i.type===xe||"IVARNAME"===i.type?r||Ie(e,i.value)?null!==s?(Ie(e,s)||e.push(s),s=i.value):s=i.value:e.push(i.value):"IMEMBER"===i.type&&r&&null!==s?s+="."+i.value:i.type===be?Ne(i.value,e,n):null!==s&&(Ie(e,s)||e.push(s),s=null)}null===s||Ie(e,s)||e.push(s)}function Se(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}we.prototype.toString=function(){switch(this.type){case ge:case"IOP1":case"IOP2":case"IOP3":case xe:case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},Se.prototype.simplify=function(t){return t=t||{},new Se(function t(e,n,r,s,o){for(var i,a,u,l,c=[],p=[],h=0;h<e.length;h++){var f=e[h],d=f.type;if(d===ge||"IVARNAME"===d)Array.isArray(f.value)?c.push.apply(c,t(f.value.map((function(t){return new we(ge,t)})).concat(new we("IARRAY",f.value.length)),n,r,s,o)):c.push(f);else if(d===xe&&o.hasOwnProperty(f.value))f=new we(ge,o[f.value]),c.push(f);else if("IOP2"===d&&c.length>1)a=c.pop(),i=c.pop(),l=r[f.value],f=new we(ge,l(i.value,a.value)),c.push(f);else if("IOP3"===d&&c.length>2)u=c.pop(),a=c.pop(),i=c.pop(),"?"===f.value?c.push(i.value?a.value:u.value):(l=s[f.value],f=new we(ge,l(i.value,a.value,u.value)),c.push(f));else if("IOP1"===d&&c.length>0)i=c.pop(),l=n[f.value],f=new we(ge,l(i.value)),c.push(f);else if(d===be){for(;c.length>0;)p.push(c.shift());p.push(new we(be,t(f.value,n,r,s,o)))}else if("IMEMBER"===d&&c.length>0)i=c.pop(),c.push(new we(ge,i.value[f.value]));else{for(;c.length>0;)p.push(c.shift());p.push(f)}}for(;c.length>0;)p.push(c.shift());return p}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t),this.parser)},Se.prototype.substitute=function(t,e){return e instanceof Se||(e=this.parser.parse(String(e))),new Se(function t(e,n,r){for(var s=[],o=0;o<e.length;o++){var i=e[o],a=i.type;if(a===xe&&i.value===n)for(var u=0;u<r.tokens.length;u++){var l,c=r.tokens[u];l="IOP1"===c.type?Ee(c.value):"IOP2"===c.type?Me(c.value):"IOP3"===c.type?Ae(c.value):new we(c.type,c.value),s.push(l)}else a===be?s.push(new we(be,t(i.value,n,r))):s.push(i)}return s}(this.tokens,t,e),this.parser)},Se.prototype.evaluate=function(t){return t=t||{},ke(this.tokens,this,t)},Se.prototype.toString=function(){return $e(this.tokens,!1)},Se.prototype.symbols=function(t){t=t||{};var e=[];return Ne(this.tokens,e,t),e},Se.prototype.variables=function(t){t=t||{};var e=[];Ne(this.tokens,e,t);var n=this.functions;return e.filter((function(t){return!(t in n)}))},Se.prototype.toJSFunction=function(t,e){var n=this,r=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+$e(this.simplify(e).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var Pe="TOP",Fe="TPAREN";function Re(t,e,n){this.type=t,this.value=e,this.index=n}function je(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}Re.prototype.toString=function(){return this.type+": "+this.value},je.prototype.newToken=function(t,e,n){return new Re(t,e,null!=n?n:this.pos)},je.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},je.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},je.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},je.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var s=this.expression.substring(e+1,r);this.current=this.newToken("TSTRING",this.unescape(s),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},je.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(Fe,t),this.pos++,!0)},je.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken("TBRACKET",t),this.pos++,!0)},je.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},je.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},je.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken("TNUMBER",this.consts[r]),this.pos+=r.length,!0}return!1},je.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(Pe,r),this.pos+=r.length,!0}return!1},je.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var s=this.expression.substring(t,e);return this.current=this.newToken("TNAME",s),this.pos+=s.length,!0}return!1},je.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var Le=/^[0-9a-f]{4}$/i;function Ue(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}je.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var s=t.substring(e+1,e+5);Le.test(s)||this.parseError("Illegal escape sequence: \\u"+s),n+=String.fromCharCode(parseInt(s,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var o=t.indexOf("\\",e);n+=t.substring(e,o<0?t.length:o),e=o}return n},je.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},je.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,s=n;n<this.expression.length;){var o=this.expression.charAt(n);if(!e.test(o))break;n++,r=!0}return r&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(s,n),t)),this.pos=n),r},je.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,s=n,o=!1,i=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!o&&"."===t);)"."===t?o=!0:i=!0,n++,e=i;if(e&&(s=n),"e"===t||"E"===t){n++;for(var a=!0,u=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!a||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,a=!1}else a=!1;n++}u||(n=s)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=s,e},je.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(Pe,e);else if("∙"===e||"•"===e)this.current=this.newToken(Pe,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Pe,">="),this.pos++):this.current=this.newToken(Pe,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Pe,"<="),this.pos++):this.current=this.newToken(Pe,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Pe,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Pe,"=="),this.pos++):this.current=this.newToken(Pe,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Pe,"!="),this.pos++):this.current=this.newToken(Pe,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},je.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},je.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},je.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},Ue.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Ue.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?Ie(e,t.value):"function"==typeof e?e(t):t.value===e)},Ue.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Ue.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Ue.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},Ue.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},Ue.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(Pe,(function(t){return t.value in e})))t.push(new we(xe,this.current.value));else if(this.accept("TNUMBER"))t.push(new we(ge,this.current.value));else if(this.accept("TSTRING"))t.push(new we(ge,this.current.value));else if(this.accept(Fe,"("))this.parseExpression(t),this.expect(Fe,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new we("IARRAY",0));else{var n=this.parseArrayList(t);t.push(new we("IARRAY",n))}}},Ue.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},Ue.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},Ue.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===Fe&&")"===this.nextToken.value||e.push(new we("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new we(be,e)),!0)},Ue.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},Ue.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(Pe,"=");){var e=t.pop(),n=[],r=t.length-1;if("IFUNCALL"!==e.type){if(e.type!==xe&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new we("IVARNAME",e.value)),t.push(new we(be,n)),t.push(Me("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var s=0,o=e.value+1;s<o;s++){var i=r-s;t[i].type===xe&&(t[i]=new we("IVARNAME",t[i].value))}this.parseVariableAssignmentExpression(n),t.push(new we(be,n)),t.push(new we("IFUNDEF",e.value))}}},Ue.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(Pe,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(Pe,":"),this.parseConditionalExpression(n),t.push(new we(be,e)),t.push(new we(be,n)),t.push(Ae("?"))}},Ue.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(Pe,"or");){var e=[];this.parseAndExpression(e),t.push(new we(be,e)),t.push(Me("or"))}},Ue.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(Pe,"and");){var e=[];this.parseComparison(e),t.push(new we(be,e)),t.push(Me("and"))}};var Be=["==","!=","<","<=",">=",">","in"];Ue.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(Pe,Be);){var e=this.current;this.parseAddSub(t),t.push(Me(e.value))}};var qe=["+","-","||"];Ue.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(Pe,qe);){var e=this.current;this.parseTerm(t),t.push(Me(e.value))}};var Ve=["*","/","%"];function ze(t,e){return Number(t)+Number(e)}function De(t,e){return t-e}function We(t,e){return t*e}function Ye(t,e){return t/e}function He(t,e){return t%e}function Je(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function Ke(t,e){return t===e}function Ge(t,e){return t!==e}function Xe(t,e){return t>e}function Qe(t,e){return t<e}function Ze(t,e){return t>=e}function tn(t,e){return t<=e}function en(t,e){return Boolean(t&&e)}function nn(t,e){return Boolean(t||e)}function rn(t,e){return Ie(e,t)}function sn(t){return(Math.exp(t)-Math.exp(-t))/2}function on(t){return(Math.exp(t)+Math.exp(-t))/2}function an(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function un(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function ln(t){return Math.log(t+Math.sqrt(t*t-1))}function cn(t){return Math.log((1+t)/(1-t))/2}function pn(t){return Math.log(t)*Math.LOG10E}function hn(t){return-t}function fn(t){return!t}function dn(t){return t<0?Math.ceil(t):Math.floor(t)}function vn(t){return Math.random()*(t||1)}function mn(t){return gn(t+1)}Ue.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(Pe,Ve);){var e=this.current;this.parseFactor(t),t.push(Me(e.value))}},Ue.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(Pe,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Fe&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===Fe&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(Ee(n.value))}else this.parseExponential(t)},Ue.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(Pe,"^");)this.parseFactor(t),t.push(Me("^"))},Ue.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(Pe,"!");)t.push(Ee("!"))},Ue.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(Pe,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(Ee(n.value))}else for(this.parseMemberExpression(t);this.accept(Fe,"(");)if(this.accept(Fe,")"))t.push(new we("IFUNCALL",0));else{var r=this.parseArgumentList(t);t.push(new we("IFUNCALL",r))}},Ue.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(Fe,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},Ue.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(Pe,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),t.push(new we("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(Me("["))}}};var yn=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function gn(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,s=t-1;r>1;)s*=r,r--;return 0===s&&(s=1),s}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*gn(1-t));if(t>=171.35)return 1/0;if(t>85){var o=t*t,i=o*t,a=i*t,u=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*o)-139/(51840*i)-571/(2488320*a)+163879/(209018880*u)+5246819/(75246796800*u*t))}--t,n=yn[0];for(var l=1;l<yn.length;++l)n+=yn[l]/(t+l);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}function xn(t){return Array.isArray(t)?t.length:String(t).length}function bn(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,s=Math.abs(arguments[n]);e<s?(t=t*(r=e/s)*r+1,e=s):t+=s>0?(r=s/e)*r:s}return e===1/0?1/0:e*Math.sqrt(t)}function wn(t,e,n){return t?e:n}function En(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function Mn(t,e,n){return n&&(n[t]=e),e}function An(t,e){return t[0|e]}function kn(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function On(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function Tn(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))}function _n(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)}function $n(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))}function Cn(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function In(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function Nn(t){return(t>0)-(t<0)||+t}function Sn(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function Pn(t){return Math.exp(t)-1}function Fn(t){return Math.log(1+t)}function Rn(t){return Math.log(t)/Math.LN2}function jn(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||sn,cosh:Math.cosh||on,tanh:Math.tanh||an,asinh:Math.asinh||un,acosh:Math.acosh||ln,atanh:Math.atanh||cn,sqrt:Math.sqrt,cbrt:Math.cbrt||Sn,log:Math.log,log2:Math.log2||Rn,ln:Math.log,lg:Math.log10||pn,log10:Math.log10||pn,expm1:Math.expm1||Pn,log1p:Math.log1p||Fn,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||dn,"-":hn,"+":Number,exp:Math.exp,not:fn,length:xn,"!":mn,sign:Math.sign||Nn},this.binaryOps={"+":ze,"-":De,"*":We,"/":Ye,"%":He,"^":Math.pow,"||":Je,"==":Ke,"!=":Ge,">":Xe,"<":Qe,">=":Ze,"<=":tn,and:en,or:nn,in:rn,"=":Mn,"[":An},this.ternaryOps={"?":wn},this.functions={random:vn,fac:mn,min:On,max:kn,hypot:Math.hypot||bn,pyt:Math.hypot||bn,pow:Math.pow,atan2:Math.atan2,if:wn,gamma:gn,roundTo:En,map:Tn,fold:_n,filter:$n,indexOf:Cn,join:In},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}jn.prototype.parse=function(t){var e=[],n=new Ue(this,new je(this,t),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(e),n.expect("TEOF","EOF"),new Se(e,this)},jn.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Ln=new jn;jn.parse=function(t){return Ln.parse(t)},jn.evaluate=function(t,e){return Ln.parse(t).evaluate(e)};var Un={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function Bn(t,e,n){const r=t.slice();return r[4]=e[n],r}function qn(t,e,n){const r=t.slice();return r[4]=e[n],r}function Vn(t){let e,n,r;function s(){t[3].call(e,t[4])}return{c(){e=c("input"),d(e,"class","input"),d(e,"type","text"),d(e,"placeholder",n=`${t[4].title} (${t[4].name})`)},m(n,o){a(n,e,o),m(e,t[1][t[4].name]),r=f(e,"input",s)},p(r,s){t=r,1&s&&n!==(n=`${t[4].title} (${t[4].name})`)&&d(e,"placeholder",n),3&s&&e.value!==t[1][t[4].name]&&m(e,t[1][t[4].name])},d(t){t&&u(e),r()}}}function zn(t){let e,n,r,s,o,l,f=t[4].title+"",d=t[2](t[4],t[0].sources)+"";return{c(){e=c("div"),n=p(f),r=p(":\n        "),s=c("b"),o=p(d),l=h()},m(t,u){a(t,e,u),i(e,n),i(e,r),i(e,s),i(s,o),i(e,l)},p(t,e){1&e&&f!==(f=t[4].title+"")&&v(n,f),1&e&&d!==(d=t[2](t[4],t[0].sources)+"")&&v(o,d)},d(t){t&&u(e)}}}function Dn(e){let n,r,s,o,f,m,y,g,x,b=(e[0].title||"Untitled")+"",w=e[0].sources,E=[];for(let t=0;t<w.length;t+=1)E[t]=Vn(qn(e,w,t));let M=e[0].equations,A=[];for(let t=0;t<M.length;t+=1)A[t]=zn(Bn(e,M,t));return{c(){n=c("div"),r=c("div"),s=c("span"),o=p(b),f=h(),m=c("div");for(let t=0;t<E.length;t+=1)E[t].c();y=h(),g=c("hr"),x=h();for(let t=0;t<A.length;t+=1)A[t].c();d(s,"class","mr-sm"),d(r,"class","widget--title mb-xs is-flex align-center svelte-at3k1e"),d(n,"class","widget--content")},m(t,e){a(t,n,e),i(n,r),i(r,s),i(s,o),i(n,f),i(n,m);for(let t=0;t<E.length;t+=1)E[t].m(m,null);i(m,y),i(m,g),i(m,x);for(let t=0;t<A.length;t+=1)A[t].m(m,null)},p(t,[e]){if(1&e&&b!==(b=(t[0].title||"Untitled")+"")&&v(o,b),3&e){let n;for(w=t[0].sources,n=0;n<w.length;n+=1){const r=qn(t,w,n);E[n]?E[n].p(r,e):(E[n]=Vn(r),E[n].c(),E[n].m(m,y))}for(;n<E.length;n+=1)E[n].d(1);E.length=w.length}if(5&e){let n;for(M=t[0].equations,n=0;n<M.length;n+=1){const r=Bn(t,M,n);A[n]?A[n].p(r,e):(A[n]=zn(r),A[n].c(),A[n].m(m,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=M.length}},i:t,o:t,d(t){t&&u(n),l(E,t),l(A,t)}}}function Wn(t,e,n){let{content:r}=e,s={};return t.$set=t=>{"content"in t&&n(0,r=t.content)},[r,s,function(t,e){const n=new jn;if(!t.formula)return"";const r=n.parse(t.formula);let o="";try{o=r.evaluate(s)}catch(e){o=`can't evaluate (formula is ${t.formula})`}return o},function(t){s[t.name]=this.value,n(1,s),n(0,r)}]}jn.prototype.isOperatorEnabled=function(t){var e=function(t){return Un.hasOwnProperty(t)?Un[t]:t}(t),n=this.options.operators||{};return!(e in n&&!n[e])};class Yn extends Y{constructor(t){super(),W(this,t,Wn,Dn,o,{content:0})}}function Hn(t,e,n){const r=t.slice();return r[6]=e[n],r}function Jn(e){let n,r;return{c(){n=c("button"),n.textContent="Edit Widgets",d(n,"class","button is-link is-small ml-xs")},m(t,s){a(t,n,s),r=f(n,"click",e[4])},p:t,d(t){t&&u(n),r()}}}function Kn(t){let e;const n=new ye({props:{content:t[6].content}});return{c(){q(n.$$.fragment)},m(t,r){V(n,t,r),e=!0},p(t,e){const r={};2&e&&(r.content=t[6].content),n.$set(r)},i(t){e||(j(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){z(n,t)}}}function Gn(t){let e;const n=new Yn({props:{content:t[6].content}});return{c(){q(n.$$.fragment)},m(t,r){V(n,t,r),e=!0},p(t,e){const r={};2&e&&(r.content=t[6].content),n.$set(r)},i(t){e||(j(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){z(n,t)}}}function Xn(t){let e,n;function r(...e){return t[5](t[6],...e)}return{c(){e=c("button"),d(e,"class","delete widget--delete svelte-5op0xy"),d(e,"aria-label","close")},m(t,s){a(t,e,s),n=f(e,"click",r)},p(e,n){t=e},d(t){t&&u(e),n()}}}function Qn(t,e){let n,r,s,o,l,p,f="fetcher"===e[6].type&&Kn(e),v="equation"===e[6].type&&Gn(e),m=e[0]&&Xn(e);return{key:t,first:null,c(){n=c("div"),r=c("div"),f&&f.c(),s=h(),v&&v.c(),o=h(),m&&m.c(),l=h(),d(r,"class","card-content p-md"),d(n,"class","card"),this.first=n},m(t,e){a(t,n,e),i(n,r),f&&f.m(r,null),i(r,s),v&&v.m(r,null),i(r,o),m&&m.m(r,null),i(n,l),p=!0},p(t,e){"fetcher"===t[6].type?f?(f.p(t,e),j(f,1)):(f=Kn(t),f.c(),j(f,1),f.m(r,s)):f&&(F(),L(f,1,1,()=>{f=null}),R()),"equation"===t[6].type?v?(v.p(t,e),j(v,1)):(v=Gn(t),v.c(),j(v,1),v.m(r,o)):v&&(F(),L(v,1,1,()=>{v=null}),R()),t[0]?m?m.p(t,e):(m=Xn(t),m.c(),m.m(r,null)):m&&(m.d(1),m=null)},i(t){p||(j(f),j(v),p=!0)},o(t){L(f),L(v),p=!1},d(t){t&&u(n),f&&f.d(),v&&v.d(),m&&m.d()}}}function Zn(t){let e,n,r,s,o,l,p,f,v=[],m=new Map;const y=new Kt({});y.$on("add",t[2]);const g=new oe({});g.$on("add",t[2]);let x=t[1].length>0&&Jn(t),b=t[1];const w=t=>t[6].id;for(let e=0;e<b.length;e+=1){let n=Hn(t,b,e),r=w(n);m.set(r,v[e]=Qn(r,n))}return{c(){e=c("div"),n=c("div"),r=c("div"),q(y.$$.fragment),s=h(),o=c("div"),q(g.$$.fragment),l=h(),x&&x.c(),p=h();for(let t=0;t<v.length;t+=1)v[t].c();d(r,"class","mr-xs"),d(n,"class","toolbar is-flex justify-space-between py-sm"),d(e,"class","mx-sm")},m(t,u){a(t,e,u),i(e,n),i(n,r),V(y,r,null),i(n,s),i(n,o),V(g,o,null),i(n,l),x&&x.m(n,null),i(e,p);for(let t=0;t<v.length;t+=1)v[t].m(e,null);f=!0},p(t,[r]){if(t[1].length>0?x?x.p(t,r):(x=Jn(t),x.c(),x.m(n,null)):x&&(x.d(1),x=null),11&r){const n=t[1];F(),v=function(t,e,n,r,s,o,i,a,u,l,c,p){let h=t.length,f=o.length,d=h;const v={};for(;d--;)v[t[d].key]=d;const m=[],y=new Map,g=new Map;for(d=f;d--;){const t=p(s,o,d),a=n(t);let u=i.get(a);u?r&&u.p(t,e):(u=l(a,t),u.c()),y.set(a,m[d]=u),a in v&&g.set(a,Math.abs(d-v[a]))}const x=new Set,b=new Set;function w(t){j(t,1),t.m(a,c),i.set(t.key,t),c=t.first,f--}for(;h&&f;){const e=m[f-1],n=t[h-1],r=e.key,s=n.key;e===n?(c=e.first,h--,f--):y.has(s)?!i.has(r)||x.has(r)?w(e):b.has(s)?h--:g.get(r)>g.get(s)?(b.add(r),w(e)):(x.add(s),h--):(u(n,i),h--)}for(;h--;){const e=t[h];y.has(e.key)||u(e,i)}for(;f;)w(m[f-1]);return m}(v,r,w,1,t,n,m,e,B,Qn,null,Hn),R()}},i(t){if(!f){j(y.$$.fragment,t),j(g.$$.fragment,t);for(let t=0;t<b.length;t+=1)j(v[t]);f=!0}},o(t){L(y.$$.fragment,t),L(g.$$.fragment,t);for(let t=0;t<v.length;t+=1)L(v[t]);f=!1},d(t){t&&u(e),z(y),z(g),x&&x.d();for(let t=0;t<v.length;t+=1)v[t].d()}}}function tr(t,e,n){let r=!1,s=[];function o(){n(1,s=Dt())}function i(t){var e;confirm("Deleting widget, Are you sure?")&&(e=t,Wt(Dt().filter(t=>t.id!==e)),o())}o();return[r,s,o,i,()=>{n(0,r=!r)},t=>i(t.id)]}class er extends Y{constructor(t){super(),W(this,t,tr,Zn,o,{})}}function nr(e){let n,r;const s=new er({});return{c(){n=c("main"),q(s.$$.fragment)},m(t,e){a(t,n,e),V(s,n,null),r=!0},p:t,i(t){r||(j(s.$$.fragment,t),r=!0)},o(t){L(s.$$.fragment,t),r=!1},d(t){t&&u(n),z(s)}}}return new class extends Y{constructor(t){super(),W(this,t,null,nr,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
